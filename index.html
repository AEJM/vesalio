<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Reproductor multilingüe vertical</title>
<style>
  :root {
    --beige:#f6f0e8;
    --white:#ffffff;
    --black:#000000;
    --accent:#2b6cb0;
    --active:#1d4ed8;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    background:var(--beige);
    font-family:Inter, system-ui, sans-serif;
    display:flex; justify-content:center; align-items:center;
  }

  .container{
    width:min(520px,100vw);
    background:var(--white);
    display:flex; flex-direction:column;
    box-shadow:0 4px 20px rgba(0,0,0,.1);
  }

  /* Barra de idioma ultra compacta */
  .lang-bar{
    display:flex; justify-content:center; align-items:center; gap:6px;
    background:#fafafa; border-bottom:1px solid #ddd;
    padding:4px 0; position:sticky; top:0; z-index:1000;
  }
  .lang-btn{
    display:flex; align-items:center; gap:4px;
    border:1px solid transparent; border-radius:6px;
    padding:4px 6px; background:transparent; cursor:pointer;
    font-weight:600; color:#333; font-size:12px;
    transition:.2s;
  }
  .lang-btn img{width:18px; height:12px; object-fit:cover}
  .lang-btn.active{
    border-color:var(--active);
    background:#eaf1ff;
    color:var(--active);
  }
  .lang-btn:hover{background:#f2f2f2}

  .video-panel{
    position:relative; aspect-ratio:9/16; background:var(--black);
  }
  .video-panel iframe{
    position:absolute; inset:0; width:100%; height:100%; border:0;
  }
  .version-label{
    position:absolute; top:6px; left:6px;
    background:rgba(255,255,255,0.9); color:#000;
    font-size:11px; padding:2px 6px; border-radius:4px; font-weight:600;
  }

  @media (max-width:640px){
    body{background:#000;}
    .container{width:100vw; box-shadow:none;}
    .lang-bar{gap:4px;}
  }
</style>
</head>
<body>
  <div class="container">
    <!-- Barra de idioma simplificada -->
    <div class="lang-bar" id="langBar">
      <button class="lang-btn active" data-lang="es">
        <img src="https://flagcdn.com/w20/es.png" alt="ES">ES
      </button>
      <button class="lang-btn" data-lang="en">
        <img src="https://flagcdn.com/w20/gb.png" alt="EN">EN
      </button>
      <button class="lang-btn" data-lang="fr">
        <img src="https://flagcdn.com/w20/fr.png" alt="FR">FR
      </button>
      <button class="lang-btn" data-lang="de">
        <img src="https://flagcdn.com/w20/de.png" alt="DE">DE
      </button>
    </div>

    <!-- Reproductor -->
    <div class="video-panel">
      <span class="version-label" id="langLabel">ES</span>
      <iframe id="videoFrame" allow="autoplay; fullscreen; picture-in-picture; encrypted-media"></iframe>
    </div>
  </div>

<script>
  function driveShareToPreview(url){
    try{
      const m = url.match(/\/d\/([a-zA-Z0-9_-]{10,})\//);
      if(m && m[1]) return `https://drive.google.com/file/d/${m[1]}/preview`;
      const u = new URL(url);
      const id = u.searchParams.get('id');
      if(id) return `https://drive.google.com/file/d/${id}/preview`;
    }catch(e){}
    return null;
  }

  const LANG_URLS = {
    es:"https://drive.google.com/file/d/1d-KY6xlh7hy9cVniYmfDk2rWVrclNMz3/view?usp=drive_link",
    en:"https://drive.google.com/file/d/1d-KY6xlh7hy9cVniYmfDk2rWVrclNMz3/view?usp=drive_link",
    fr:"https://drive.google.com/file/d/1d-KY6xlh7hy9cVniYmfDk2rWVrclNMz3/view?usp=drive_link", // agrega aquí el link FR
    de:"https://drive.google.com/file/d/1d-KY6xlh7hy9cVniYmfDk2rWVrclNMz3/view?usp=drive_link"  // agrega aquí el link DE
  };

  const frame=document.getElementById("videoFrame");
  const label=document.getElementById("langLabel");
  const buttons=document.querySelectorAll(".lang-btn");

  function loadVideo(url){
    const preview=driveShareToPreview(url);
    if(preview) frame.src=preview; else alert("Enlace inválido");
  }

  buttons.forEach(btn=>{
    btn.addEventListener("click",()=>{
      buttons.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      const code=btn.dataset.lang.toUpperCase();
      label.textContent=code;
      const url=LANG_URLS[btn.dataset.lang]||"";
      if(!url){alert("No hay enlace configurado para "+code);return;}
      loadVideo(url);
    });
  });

  loadVideo(LANG_URLS.es);
</script>
</body>
</html>
